!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){(function(n){var r;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(s){var o=Object.hasOwnProperty,l=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function h(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),void 0!==e.maxListeners&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function u(e,t){var i="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(i+=" Event name: "+t+"."),void 0!==n&&n.emitWarning){var r=new Error(i);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,n.emitWarning(r)}else console.error(i),console.trace&&console.trace()}var c=function(e,t,i){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,i];default:for(var r=new Array(n);n--;)r[n]=arguments[n];return r}};function f(e,t,i,n){var r=Object.assign({},t);if(!e)return r;if("object"!=typeof e)throw TypeError("options must be an object");var s,l,h,a=Object.keys(e),u=a.length;function c(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<u;f++){if(s=a[f],!n&&!o.call(t,s))throw Error('Unknown "'+s+'" option');void 0!==(l=e[s])&&(h=i[s],r[s]=h?h(l,c):l)}return r}function p(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("Promise option must be a constructor"),e}function m(e,t){return"function"!=typeof e&&t("Promise option must be a function"),e}function d(e,t,i){var n,r,s,o=0,l=new e((function(h,a,u){function c(){r&&(r=null),o&&(clearTimeout(o),o=0)}i=f(i,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),n=!i.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var p=function(e){c(),h(e)},m=function(e){c(),a(e)};n?t(p,m,u):(r=[function(e){m(e||Error("canceled"))}],t(p,m,(function(e){if(s)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");r.push(e)})),s=!0),i.timeout>0&&(o=setTimeout((function(){var e=Error("timeout");o=0,l.cancel(e),a(e)}),i.timeout))}));return n||(l.cancel=function(e){if(r){for(var t=r.length,i=1;i<t;i++)r[i](e);r[0](e),r=null}}),l}function v(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,a.call(this,e)}function w(e,t,i,n){if(!i)return[];var r,s,o,l,h,a,u,c=[],f=t.length,p=t[n],m=t[n+1];if(n===f&&i._listeners){if("function"==typeof i._listeners)return e&&e.push(i._listeners),[i];for(r=0,s=i._listeners.length;r<s;r++)e&&e.push(i._listeners[r]);return[i]}if("*"===p||"**"===p||i[p]){if("*"===p){for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&(c=c.concat(w(e,t,i[o],n+1)));return c}if("**"===p){for(o in(u=n+1===f||n+2===f&&"*"===m)&&i._listeners&&(c=c.concat(w(e,t,i,f))),i)"_listeners"!==o&&i.hasOwnProperty(o)&&("*"===o||"**"===o?(i[o]._listeners&&!u&&(c=c.concat(w(e,t,i[o],f))),c=c.concat(w(e,t,i[o],n))):c=o===m?c.concat(w(e,t,i[o],n+2)):c.concat(w(e,t,i[o],n)));return c}c=c.concat(w(e,t,i[p],n+1))}if((l=i["*"])&&w(e,t,l,n+1),h=i["**"])if(n<f)for(o in h._listeners&&w(e,t,h,f),h)"_listeners"!==o&&h.hasOwnProperty(o)&&(o===m?w(e,t,h[o],n+2):o===p?w(e,t,h[o],n+1):((a={})[o]=h[o],w(e,t,{"**":a},n+1)));else h._listeners?w(e,t,h,f):h["*"]&&h["*"]._listeners&&w(e,t,h["*"],f);return c}function y(e,t){for(var i=0,n=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;i+1<n;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var r=this.listenerTree,s=e.shift();void 0!==s;){if(r[s]||(r[s]={}),r=r[s],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&this._maxListeners>0&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,u.call(this,r._listeners.length,s))):r._listeners=t,!0;s=e.shift()}return!0}v.EventEmitter2=v,v.prototype.delimiter=".",v.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},v.prototype.getMaxListeners=function(){return this._maxListeners},v.prototype.event="",v.prototype.once=function(e,t){return this._once(e,t,!1)},v.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},v.prototype._once=function(e,t,i){return this._many(e,1,t,i),this},v.prototype.many=function(e,t,i){return this._many(e,t,i,!1)},v.prototype.prependMany=function(e,t,i){return this._many(e,t,i,!0)},v.prototype._many=function(e,t,i,n){var r=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");function s(){return 0==--t&&r.off(e,s),i.apply(this,arguments)}return s._origin=i,this._on(e,s,n),r},v.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,i,n,r,s,o=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),o>3)for(t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,o){case 1:s[n].call(this,e);break;case 2:s[n].call(this,e,arguments[1]);break;case 3:s[n].call(this,e,arguments[1],arguments[2]);break;default:s[n].apply(this,t)}}if(this.wildcard){s=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();w.call(this,s,l,this.listenerTree,0)}else{if("function"==typeof(s=this._events[e])){switch(this.event=e,o){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(o-1),r=1;r<o;r++)t[r-1]=arguments[r];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(o>3)for(t=new Array(o-1),r=1;r<o;r++)t[r-1]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,o){case 1:s[n].call(this);break;case 2:s[n].call(this,arguments[1]);break;case 3:s[n].call(this,arguments[1],arguments[2]);break;default:s[n].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},v.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,i,n,r,s,o=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),r=1;r<l;r++)t[r]=arguments[r];for(n=0,i=this._all.length;n<i;n++)switch(this.event=e,l){case 1:o.push(this._all[n].call(this,e));break;case 2:o.push(this._all[n].call(this,e,arguments[1]));break;case 3:o.push(this._all[n].call(this,e,arguments[1],arguments[2]));break;default:o.push(this._all[n].apply(this,t))}}if(this.wildcard){s=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();w.call(this,s,a,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,l){case 1:o.push(s.call(this));break;case 2:o.push(s.call(this,arguments[1]));break;case 3:o.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];o.push(s.apply(this,t))}else if(s&&s.length){if(s=s.slice(),l>3)for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];for(n=0,i=s.length;n<i;n++)switch(this.event=e,l){case 1:o.push(s[n].call(this));break;case 2:o.push(s[n].call(this,arguments[1]));break;case 3:o.push(s[n].call(this,arguments[1],arguments[2]));break;default:o.push(s[n].apply(this,t))}}else if(!this.ignoreErrors&&!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(o)},v.prototype.on=function(e,t){return this._on(e,t,!1)},v.prototype.prependListener=function(e,t){return this._on(e,t,!0)},v.prototype.onAny=function(e){return this._onAny(e,!1)},v.prototype.prependAny=function(e){return this._onAny(e,!0)},v.prototype.addListener=v.prototype.on,v.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},v.prototype._on=function(e,t,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||h.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(y.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,this)},v.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var i,n=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();n=w.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;i=this._events[e],n.push({_listeners:i})}for(var s=0;s<n.length;s++){var o=n[s];if(i=o._listeners,l(i)){for(var h=-1,a=0,u=i.length;a<u;a++)if(i[a]===t||i[a].listener&&i[a].listener===t||i[a]._origin&&i[a]._origin===t){h=a;break}if(h<0)continue;return this.wildcard?o._listeners.splice(h,1):this._events[e].splice(h,1),0===i.length&&(this.wildcard?delete o._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(i===t||i.listener&&i.listener===t||i._origin&&i._origin===t)&&(this.wildcard?delete o._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var i=Object.keys(t);for(var n in i){var r=i[n],s=t[r];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[r]),0===Object.keys(s).length&&delete t[r])}}}(this.listenerTree),this},v.prototype.offAny=function(e){var t,i=0,n=0;if(e&&this._all&&this._all.length>0){for(i=0,n=(t=this._all).length;i<n;i++)if(e===t[i])return t.splice(i,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(i=0,n=t.length;i<n;i++)this.emit("removeListenerAny",t[i]);this._all=[]}return this},v.prototype.removeListener=v.prototype.off,v.prototype.removeAllListeners=function(e){if(void 0===e)return!this._events||h.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),i=w.call(this,null,t,this.listenerTree,0),n=0;n<i.length;n++){i[n]._listeners=null}else this._events&&(this._events[e]=null);return this},v.prototype.listeners=function(e){if(this.wildcard){var t=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return w.call(this,t,i,this.listenerTree,0),t}return this._events||h.call(this),this._events[e]||(this._events[e]=[]),l(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},v.prototype.eventNames=function(){return Object.keys(this._events)},v.prototype.listenerCount=function(e){return this.listeners(e).length},v.prototype.listenersAny=function(){return this._all?this._all:[]},v.prototype.waitFor=function(e,t){var i=this,n=typeof t;return"number"===n?t={timeout:t}:"function"===n&&(t={filter:t}),d((t=f(t,{timeout:0,filter:void 0,handleError:!1,Promise:Promise,overload:!1},{filter:m,Promise:p})).Promise,(function(n,r,s){function o(){var e=t.filter;if(!e||e.apply(i,arguments))if(t.handleError){var s=arguments[0];s?r(s):n(c.apply(null,arguments).slice(1))}else n(c.apply(null,arguments))}s((function(){i.off(e,o)})),i._on(e,o,!1)}),{timeout:t.timeout,overload:t.overload})};var g=v.prototype;Object.defineProperties(v,{defaultMaxListeners:{get:function(){return g._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");g._maxListeners=e},enumerable:!0},once:{value:function(e,t,i){return d((i=f(i,{Promise:Promise,timeout:0,overload:!1},{Promise:p})).Promise,(function(i,n,r){var s;if("function"==typeof e.addEventListener)return s=function(){i(c.apply(null,arguments))},r((function(){e.removeEventListener(t,s)})),void e.addEventListener(t,s,{once:!0});var o,l=function(){o&&e.removeListener("error",o),i(c.apply(null,arguments))};"error"!==t&&(o=function(i){e.removeListener(t,l),n(i)},e.once("error",o)),r((function(){o&&e.removeListener("error",o),e.removeListener(t,l)})),e.once(t,l)}),{timeout:i.timeout,overload:i.overload})},writable:!0,configurable:!0}}),Object.defineProperties(g,{_maxListeners:{value:10,writable:!0,configurable:!0}}),void 0===(r=function(){return v}.call(t,i,t,e))||(e.exports=r)}()}).call(this,i(1))},function(e,t){var i,n,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var h,a=[],u=!1,c=-1;function f(){u&&h&&(u=!1,h.length?a=h.concat(a):c=-1,a.length&&p())}function p(){if(!u){var e=l(f);u=!0;for(var t=a.length;t;){for(h=a,a=[];++c<t;)h&&h[c].run();c=-1,t=a.length}h=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function d(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];a.push(new m(e,t)),1!==a.length||u||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,i){"use strict";i.r(t);var n=i(0);class r{constructor(){this.items=[]}add(e){}rm(e){}move(e,t){}}let s=new n.EventEmitter2;n.EventEmitter2;let o=0;for(var l=["ms","moz","webkit","o"],h=0;h<l.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=window[l[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[h]+"CancelAnimationFrame"]||window[l[h]+"CancelRequestAnimationFrame"];void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(e){var t=Date.now(),i=Math.max(0,16-(t-o)),n=window.setTimeout((function(){e(t+i)}),i);return o=t+i,n}),void 0===window.cancelAnimationFrame&&(window.cancelAnimationFrame=function(e){clearTimeout(e)});class a{constructor(e,t,i){this.name=e,this.x=t||0,this.y=i||0,this.wheelDeltaX=0,this.wheelDeltaY=0,this.keyCode=0,this.keyName=0,this.touches=[]}clone(){let e=new a(this.name,this.x,this.y);e.wheelDeltaX=this.wheelDeltaX,e.wheelDeltaY=this.wheelDeltaY,e.keyCode=this.keyCode,e.keyName=this.keyName;for(let t of this.touches)e.touches.push(t);return e}}class u extends n.EventEmitter2{constructor(e){super(e),this.watchMouseDrag=!1,this.w=e.w||800,this.h=e.h||600,this.el=e.el,this.el.onmousedown=this.onMouseDown.bind(this),this.el.onmouseup=this.onMouseUp.bind(this),this.el.onmousemove=this.onMouseMove.bind(this),this.el.onmouseout=this.onMouseOut.bind(this),this.el.ontouchstart=this.onTouchStart.bind(this),this.el.ontouchmove=this.onTouchMove.bind(this),this.el.ontouchend=this.onTouchEnd.bind(this),this.el.onwheel=this.onMouseWheel.bind(this),this.ctx=this.el.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.resize(this.w,this.h),this.offsetX=0,this.offsetY=0,this.calcOffset()}resize(e,t){this.w=e,this.h=t,this.el.width=e,this.el.height=t,this.el.style.width=e+"px",this.el.style.height=t+"px",window.devicePixelRatio&&(this.el.width*=window.devicePixelRatio,this.el.height*=window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio))}calcOffset(){let e=this.el.getBoundingClientRect();this.offsetX=e.left*(this.el.width/e.width),this.offsetY=e.top*(this.el.height/e.height)}translatePoint(e,t){return{x:e-this.offsetX,y:t-this.offsetY}}onMouseDown(e){this.watchMouseDrag=!0;let t=this.translatePoint(e.clientX,e.clientY),i=new a("mousedown",t.x,t.y);this.triggerMouseDown(i),e.preventDefault()}onMouseUp(e){this.watchMouseDrag=!1;let t=this.translatePoint(e.clientX,e.clientY),i=new a("mouseup",t.x,t.y);this.triggerMouseUp(i),e.preventDefault()}onMouseOut(e){this.watchMouseDrag&&this.onMouseUp(e)}onMouseMove(e){if(this.watchMouseDrag){let t=this.translatePoint(e.clientX,e.clientY),i=new a("mousemove",t.x,t.y);this.triggerMouseMove(i)}e.preventDefault()}onTouchStart(e){if(1===e.touches.length){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:e.touches[0].pageX,clientY:e.touches[0].pageY});this.onMouseDown(t)}let t=new a("touchstart"),i=[];for(let t of e.touches){let e=this.translatePoint(t.pageX,t.pageY);i.push(e)}t.touches=i,this.emit("touchstart",t),e.preventDefault()}onTouchMove(e){if(1===e.touches.length){let t=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window,clientX:e.touches[0].pageX,clientY:e.touches[0].pageY});this.onMouseMove(t)}let t=new a("touchmove"),i=[];for(let t of e.touches){let e=this.translatePoint(t.pageX,t.pageY);i.push(e)}t.touches=i,this.emit("touchmove",t),e.preventDefault()}onTouchEnd(e){if(1===e.touches.length){let t=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,clientX:e.touches[0].pageX,clientY:e.touches[0].pageY});this.onMouseUp(t)}let t=new a("touchend"),i=[];for(let t of e.touches){let e=this.translatePoint(t.pageX,t.pageY);i.push(e)}t.touches=i,this.emit("touchend",t),e.preventDefault()}onMouseWheel(e){let t=this.translatePoint(e.clientY,e.clientY),i=new a("mousewheel",t.x,t.y);e.wheelDeltaY?(i.wheelDeltaY=e.wheelDeltaY||0,i.wheelDeltaX=e.wheelDeltaX||0):e.wheelDelta?(i.wheelDeltaY=e.wheelDelta,i.wheelDeltaX=0):(i.wheelDeltaY=-120*e.detail/3,i.wheelDeltaX=0),this.triggerMouseWheel(i),e.preventDefault(),s.emit("render")}triggerMouseDown(e){}triggerMouseUp(e){}triggerMouseMove(e){}triggerMouseWheel(e){}}let c=document.createElement("canvas");document.body.appendChild(c);new class extends u{constructor(e){super(e),this.backgroundColor="white",this.downPoint=null,this.enableFinger=!1,this.children=new r,this.mouseTarget=null,this.isDragging=!1}add(e){this.children.add(e)}addToBottom(e){this.add(e),this.children.move(e,0)}rm(e){this.children.rm(e)}moveToFront(e){this.children.move(e,this.children.items.length-1)}render(){this.clear();let e=!1;for(let t=0;t<this.children.items.length;t++){let i=this.children.items[t];i.updateAnimation(),i.visible&&(i.render(this.ctx)&&(e=!0))}e&&this.render()}clear(){this.ctx.clearRect(0,0,this.w,this.h),this.ctx.save(),this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.w,this.h),this.ctx.restore()}hitTest(e,t){for(let i=this.children.items.length-1;i>=0;i--){let n=this.children.items[i];if(!n.visible)continue;let r=n.hitTest(e,t,this.ctx);if(null!=r)return r}}triggerMouseDown(e){super.triggerMouseDown(e),s.emit("start-render"),this.emit("mousedown",e),this.downPoint={x:e.x,y:e.y},this.mouseTarget=this.hitTest(e.x,e.y),null!=this.mouseTarget&&this.mouseTarget.emit("mousedown",e,this.ctx)}triggerMouseUp(e){if(super.triggerMouseUp(e),this.emit("mouseup",e),null==this.downPoint)return;let t=this.hitTest(e.x,e.y);if(null!=t&&t.emit("mouseup",e,this.ctx),null!=this.mouseTarget&&this.isDragging){let t=new a("mousedragend",e.x,e.y);this.mouseTarget.emit("mousedragend",t,this.ctx),this.mouseTarget=null}let i=this.downPoint.x,n=this.downPoint.y,r=e.x,s=e.y;if(Math.sqrt((i-r)*(i-r)+(n-s)*(n-s))<=10){let i=new a("click",e.x,e.y);null!=t&&t.emit("click",i,this.ctx)}this.isDragging=!1,this.downPoint=null,this.render()}triggerMouseMove(e){this.emit("mousemove",e),null!=this.downPoint&&(this.isDragging=!0);let t=this.hitTest(e.x,e.y);if(null!=t&&t.emit("mousemove",e,this.ctx),null!=this.mouseTarget){var i=new a("mousedrag",e.x,e.y);this.mouseTarget.emit("mousedrag",i,this.ctx)}}triggerMouseWheel(e){this.emit("mousewheel",e);let t=this.hitTest(e.x,e.y);null!=t&&t.emit("mousewheel",e,this.ctx)}getChildPosition(e){return function e(t,i){var n=!1,r={x:0,y:0};"Scrollbase"===t.name&&(r.x+=t.offsetX,r.y+=t.offsetY);for(let e of t.children.items)if(e===i){n=!0;break}if(n){let e=i.getBound();return r.x+=e.x,r.y+=e.y,r}for(let s of t.children.items){if(null==s.children)continue;let t=s.getBound();r.x+=t.x,r.y+=t.y;let o=e(s,i);if(null!=o){n=!0,r.x+=o.x,r.y+=o.y;break}r.x-=t.x,r.y-=t.y}return n?r:null}(this,e)}}({el:c})}]);